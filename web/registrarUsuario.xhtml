<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <body>

        <ui:composition template="./estructura/masterTemplate.xhtml">

            <ui:define name="content"> 
                <div id="tooplate_main">
                    <h:form id="frmRegistro" rendered="#{(loginFormBean.verificarSesion() eq false )}">
                        <p:panel header="Registrar" >
                            <p:growl id="mensajes" sticky="true" showDetail="true" />
                            <p:panelGrid id="pnlRegistro" columns="2" styleClass="ui-noborder">
                                <p:outputLabel for="inputNombreU" value="Nombre de Usuario" />
                                <p:inputText id="inputNombreU" placeholder="Usuario" required="true" requiredMessage="Debe ingresar un Usuario" value="#{registroFormBean.usuarioRegistro.usuNombreUsuario}"/>
                                <p:outputLabel for="inputPass" value="Contraseña"/>                                
                                <p:password id="inputPass" placeholder="Contraseña" required="true" requiredMessage="Debe ingresar una Constraseña." value="#{registroFormBean.usuarioRegistro.usuPassword}"/>
                                <p:separator/>
                                <p:outputLabel/>
                                <p:outputLabel value="Datos Personal" />
                                <p:outputLabel/>                                
                                <p:outputLabel for="inputNombre" value="Nombre" />
                                <p:inputText id="inputNombre" value="#{registroFormBean.usuarioPerfil.perNombres}" placeholder="Nombre" required="true" requiredMessage="Debe ingresar un Nombre" maxlength="15"/>
                                
                                <p:outputLabel for="inputApellido" value="Apellido" />
                                <p:inputText id="inputApellido" value="#{registroFormBean.usuarioPerfil.perApellidos}" placeholder="Apellido" required="true" requiredMessage="Debe ingresar un Apellido" maxlength="10"/>
                                
                                <p:outputLabel for="inputDNI" value="DNI" />
                                <p:inputNumber id="inputDNI" value="#{registroFormBean.usuarioPerfil.perDni}" placeholder="DNI" required="true" requiredMessage="Ingrese un DNI" decimalPlaces="0">
                                    <f:validateLength minimum="8" maximum="8" />
                                </p:inputNumber>
                                                                
                                <p:outputLabel for="inputFechaNac" value="Fecha Nacimiento" />
                                <p:calendar pattern="dd/MM/yyyy" id="inputFechaNac" value="#{registroFormBean.usuarioPerfil.perFechaNac}" 
                                            placeholder="Fecha Nacimiento" required="true" requiredMessage="Ingrese una Fecha"
                                            locale="es" mask="true"/>
                                
                                <p:outputLabel for="inputEMail" value="E-Mail" />
                                <p:inputText id="inputEMail" placeholder="E-Mail" required="true" value="#{registroFormBean.usuarioPerfil.perEmail}" requiredMessage="Ingrese un EMail">
                                    <f:validator validatorId="custom.emailValidator" />
                                </p:inputText>
                                
                                <p:outputLabel for="inputDireccion" value="Dirección" />
                                <p:inputText id="inputDireccion" placeholder="Dirección" value="#{registroFormBean.usuarioPerfil.perDireccion}" required="true" requiredMessage="Ingrese una Dirección" maxlength="20"/>
                                
                                <p:outputLabel for="inputTelefono" value="Teléfono" />
                                <p:inputNumber id="inputTelefono" placeholder="Teléfono" required="true" value="#{registroFormBean.usuarioPerfil.perTelefono}" requiredMessage="Ingrese un Teléfono" decimalPlaces="0">
                                    <f:validateLength minimum="8" maximum="8"/>
                                    <f:validateLongRange maximum="8"/>
                                </p:inputNumber>                                    
                                
                                
                                <p:commandButton id="btnRegistro" value="Registrarse" update="frmRegistro" action="#{registroFormBean.registrarUsuario()}"/>
                            </p:panelGrid>
                        </p:panel>                            
                    </h:form>
                    <h:form rendered="#{loginFormBean.verificarSesion()}">
                        Para registrar un nuevo usuario tiene que desloguearse
                    </h:form>
                </div>
            </ui:define>

            

        </ui:composition>

    </body>
</html>